### Question 1: Your tasks are to download a Jinja2 Template called `mydomain-hostfile1.j2` from the below url 
- `https://raw.githubusercontent.com/anishrana2001/Openshift/refs/heads/main/RHCE/V-9.0/mydomain-hostfile1.j2` 
- Jinj2 template file must be located in the `/home/student/ansible` directory.
- Update the `webserver` host group in the `/etc/temp-myhosts` file from the above jinja2  template.
- Create a playbook with the name `host-modify-quest1.yaml` in the `/home/student/ansible` directory for these tasks.
---

### Solution:
- Step 1. Download the file with named `mydomain-hostfile1.j2` from the mentioned URL.
- Step 2. Update the `webserver` host group so that it will create/update the file `/etc/temp-myhosts`

```
---
- name: Collect the all node information
hosts: webserver
tasks:
- name: copy the template to the managed node
ansible.builtin.template:
src: mydomain-hostfile1.j2
dest: /etc/temp-myhosts
```
---
### 
---

### Question 2: Your tasks are to download a Jinja2 Template called `mydomain-hostfile2.j2` from below url 
- `https://raw.githubusercontent.com/anishrana2001/Openshift/refs/heads/main/RHCE/V-9.0/mydomain-hostfile2.j2` 
- Jinj2 template file must be located in the `/home/student/ansible` directory.
- Modify the jinj2 teamplate so that it will match file `host.yaml`. This file is available in the URL `https://raw.githubusercontent.com/anishrana2001/Openshift/refs/heads/main/RHCE/V-9.0/host.yaml`
- Download the file `host.yaml` in the `/home/student/ansible` directory.
- Update the `myprod` host group in the `/etc/temp-myhosts` file from the above jinja2 template.
- Create a playbook with the name `host-modify-quest2.yaml` in the `/home/student/ansible` directory for these tasks.
---

### Solution:
- Step 1. Download the file with named `mydomain-hostfile2.j2` from the mentioned URL in the `/home/student/ansible` directory
- Step 2. Download the file with named `host.yaml` in the `/home/student/ansible` directory
- Step 3. Update the Jinja2 template so that it will match the content of `host.yaml`. Here, we need to add the ansible variables.
- Step 4. create a ansible-playbook with the name `host-modify-quest2.yaml` in the `/home/student/ansible` directory.


### For your references.
```
[student@workstation ansible]$ pwd
/home/student/ansible

[student@workstation ansible]$ curl -o mydomain-hostfile2.j2 https://raw.githubusercontent.com/anishrana2001/Openshift/refs/heads/main/RHCE/V-9.0/mydomain-hostfile2.j2
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   158  100   158    0     0    351      0 --:--:-- --:--:-- --:--:--   351

[student@workstation ansible]$ cat mydomain-hostfile2.j2
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
[student@workstation ansible]$ 


[student@workstation ansible]$ curl -o host.yaml https://raw.githubusercontent.com/anishrana2001/Openshift/refs/heads/main/RHCE/V-9.0/host.yaml
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   516  100   516    0     0    861      0 --:--:-- --:--:-- --:--:--   861

[student@workstation ansible]$ cat host.yaml 
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
172.25.250.254  bastion.lab.example.com bastion
172.25.250.8    utility.lab.example.com     utility
172.25.250.9    workstation.lab.example.com   workstation
172.25.250.10   servera.lab.example.com   servera
172.25.250.11   serverb.lab.example.com   serverb
172.25.250.12   serverc.lab.example.com   serverc
172.25.250.13   serverd.lab.example.com   serverd
[student@workstation ansible]$ vi mydomain-hostfile2.j2 

[student@workstation ansible]$ cat mydomain-hostfile2.j2 
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
{% for i in groups.all %}
{{ hostvars[i].ansible_default_ipv4.address }} {{ hostvars[i].ansible_fqdn }} {{ hostvars[i].ansible_hostname }}
{% endfor %}
[student@workstation ansible]$
```

student@workstation ~]$ ansible-doc -l | grep template
template                                       Template a file out to a tar...
[student@workstation ~]$ ansible-doc template 

![alt text](<Screenshot 2025-10-13 at 4.53.25â€¯PM.png>)

### Copy the content and create a file.
```
vi host-modify-quest2.yaml
```
### File content.
```
---
- name: Creating a new file /etc/temp-myhosts
  hosts: all
  tasks:
    - name: create file
      ansible.builtin.template:
        src: /home/student/ansible/mydomain-hostfile2.j2
        dest: /etc/temp-myhosts
      when: inventory_hostname in groups['myprod']
```

### Run the playbook.
```
ansible-navigator run host-modify-quest2.yaml -m stdout
```

### Post checks.
```
ansible myprod -m shell -a 'cat /etc/temp-myhosts'
```



### For your references.
```
[student@workstation ansible]$ vi host-modify-quest2.yaml

[student@workstation ansible]$ ansible-navigator run host-modify-quest2.yaml -m stdout

PLAY [Creating a new file /etc/temp-myhosts] ***********************************

TASK [Gathering Facts] *********************************************************
ok: [serverc]
ok: [serverd]
ok: [serverb]
ok: [servera]

TASK [create file] *************************************************************
skipping: [servera]
skipping: [serverb]
skipping: [serverc]
changed: [serverd]

PLAY RECAP *********************************************************************
servera                    : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
serverb                    : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
serverc                    : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
serverd                    : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


[student@workstation ansible]$ ansible myprod -m shell -a 'cat /etc/temp-myhosts'
serverd | CHANGED | rc=0 >>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
172.25.250.10 servera.lab.example.com servera 
172.25.250.11 serverb.lab.example.com serverb 
172.25.250.12 serverc.lab.example.com serverc 
172.25.250.13 serverd.lab.example.com serverd 


[student@workstation ansible]$ cat host-modify-quest2.yaml
---
- name: Creating a new file /etc/temp-myhosts
  hosts: all
  tasks:
    - name: create file
      ansible.builtin.template:
        src: /home/student/ansible/mydomain-hostfile2.j2
        dest: /etc/temp-myhosts
      when: inventory_hostname in groups['myprod']
[student@workstation ansible]$ 
```